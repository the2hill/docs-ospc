.. _cdn-get-all-services:

Retrieve all services
~~~~~~~~~~~~~~~~~~~~~

.. code::

    GET /v1.0/{project_id}/services

This operation retrieves a list of all available services.

The following table shows the possible response codes for this operation.

+--------------------------+-------------------------+------------------------+
|Response Code             |Name                     |Description             |
+==========================+=========================+========================+
|200                       |OK                       |Success or no services  |
|                          |                         |to return when there is |
|                          |                         |an empty list of        |
|                          |                         |services.               |
+--------------------------+-------------------------+------------------------+
|400                       |Bad Request              |Invalid limit value     |
|                          |                         |(string, less than or   |
|                          |                         |equal to 0, 1000000000),|
|                          |                         |or the limit value is   |
|                          |                         |greater than the maximum|
|                          |                         |allowed (which defaults |
|                          |                         |to 20).                 |
+--------------------------+-------------------------+------------------------+

Request
-------

The following table shows the URI parameters for the request.

+-------------+-------+--------------------------------------------------------------+
|Name         |Type   |Description                                                   |
+=============+=======+==============================================================+
|{project_id} |String |The project ID for the user. If you do not set the ``X-       |
|             |       |Project-Id header`` in the request, use ``project_id`` in the |
|             |       |URI. For example: ``GET                                       |
|             |       |https://global.cdn.api.rackspacecloud.com/v1.0/{project_id}`` |
+-------------+-------+--------------------------------------------------------------+

The following table shows the query parameters for the request.

+--------------------------+-------------------------+-------------------------+
|Name                      |Type                     |Description              |
+==========================+=========================+=========================+
|marker                    |String                   |Specifies the            |
|                          |                         |``service_id`` that      |
|                          |                         |represents the last      |
|                          |                         |service listed.          |
+--------------------------+-------------------------+-------------------------+
|limit                     |Integer                  |Specifies the number of  |
|                          |                         |resources to list. The   |
|                          |                         |maximum value that you   |
|                          |                         |can specify for          |
|                          |                         |``limit`` is 20.         |
+--------------------------+-------------------------+-------------------------+

This operation does not accept a request body.

**Example: Retrieve all services HTTP request**

.. code::

   GET /v1.0/110011/services{?marker=96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0,limit=20} HTTP/1.1
   Host: global.cdn.api.rackspacecloud.com
   X-Auth-Token: 0f6e9f63600142f0a970911583522217
   Accept: application/json
   Content-type: application/json

Response
--------

The following table shows the body parameters for the response.

+----------------------+---------+---------------------------------------------+
|Name                  |Type     |Description                                  |
+======================+=========+=============================================+
|\ **id**              |String   |Specifies the service ID that represents     |
|                      |         |distributed content. The value is a UUID,    |
|                      |         |such as 96737ae3-cfc1-4c72-be88-             |
|                      |         |5d0e7cc9a3f0, that is generated by the       |
|                      |         |server.                                      |
+----------------------+---------+---------------------------------------------+
|\ **project_id**      |String   |Specifies the unique identifier for the      |
|                      |         |user. (This is your actual account ID that   |
|                      |         |is returned as part of the authentication    |
|                      |         |service response.)                           |
+----------------------+---------+---------------------------------------------+
|\ **name**            |String   |Specifies the name of the service.           |
+----------------------+---------+---------------------------------------------+
|\ **domains**         |String   |Specifies a list of domains used by users to |
|                      |         |access their website.                        |
+----------------------+---------+---------------------------------------------+
|domains.\ **domain**  |String   |Specifies the domain used to access the      |
|                      |         |assets on their website, for which a CNAME   |
|                      |         |is given to the CDN provider.                |
+----------------------+---------+---------------------------------------------+
|domains.\ **protocol**|String   |Specifies the protocol used to access the    |
|                      |         |assets on this domain. Only ``http`` or      |
|                      |         |``https`` are currently allowed.             |
|                      |         |``protocol`` defaults to ``http``.           |
+----------------------+---------+---------------------------------------------+
|\ **origins**         |String   |Specifies a list of origin domains or IP     |
|                      |         |addresses where the original assets are      |
|                      |         |stored.                                      |
+----------------------+---------+---------------------------------------------+
|origins.\ **origin**  |String   |Specifies the URL or IP address to pull      |
|                      |         |origin content from.                         |
+----------------------+---------+---------------------------------------------+
|origins.\ **port**    |String   |Specifies the port used to access the        |
|                      |         |origin. The default is port 80. Note:        |
|                      |         |Rackspace CDN cannot be used with custom     |
|                      |         |ports. Services are required to run on HTTP  |
|                      |         |(80) and HTTPS (443) for the origin servers. |
+----------------------+---------+---------------------------------------------+
|origins.\ **ssl**     |String   |Uses HTTPS to access the origin. The default |
|                      |         |is false.                                    |
+----------------------+---------+---------------------------------------------+
|origins.\ **rules**   |String   |Specifies a collection of rules that define  |
|                      |         |the conditions when this origin should be    |
|                      |         |accessed. If there is more than one origin,  |
|                      |         |the ``rules`` parameter is required.         |
+----------------------+---------+---------------------------------------------+
|origins.rules.\       |String   |Specifies the name of this rule.             |
|**name**              |         |                                             |
+----------------------+---------+---------------------------------------------+
|origins.rules.\       |String   |Specifies the request URL this rule should   |
|**request_url**       |         |match for this origin to be used. Regex is   |
|                      |         |supported. Note: The regex is a Perl         |
|                      |         |Compatible Regex (PCRE). For more            |
|                      |         |information about PRCE, see `Regular         |
|                      |         |Expressions (Perl-Compatible)                |
|                      |         |<http://php.net/manual/en/book.pcre.php>`__. |
+----------------------+---------+---------------------------------------------+
|\ **caching**         |String   |Specifies the TTL rules for the assets under |
|                      |         |this service. Supports wildcards for fine    |
|                      |         |grained control.                             |
+----------------------+---------+---------------------------------------------+
|caching.\ **name**    |String   |Specifies the name of this caching rule.     |
|                      |         |Note: 'default' is a reserved name used for  |
|                      |         |the default TTL setting.                     |
+----------------------+---------+---------------------------------------------+
|caching.\ **ttl**     |String   |Specifies the TTL to apply.                  |
+----------------------+---------+---------------------------------------------+
|caching.\ **rules**   |String   |Specifies a collection of rules that         |
|                      |         |determine if this TTL should be applied to   |
|                      |         |an asset.                                    |
+----------------------+---------+---------------------------------------------+
|caching.rules.\       |String   |Specifies the name of this rule.             |
|**name**              |         |                                             |
+----------------------+---------+---------------------------------------------+
|caching.rules.\       |String   |Specifies the request URL this rule should   |
|**request_url**       |         |match for this TTL to be used. Regex is      |
|                      |         |supported. Note: The regex is a Perl         |
|                      |         |Compatible Regex (PCRE). For more            |
|                      |         |information about PRCE, see `Regular         |
|                      |         |Expressions (Perl-Compatible)                |
|                      |         |<http://php.net/manual/en/book.pcre.php>`__. |
+----------------------+---------+---------------------------------------------+
|\ **restrictions**    |String   |Specifies the restrictions that define who   |
|                      |         |can access assets (content from the CDN      |
|                      |         |cache).                                      |
+----------------------+---------+---------------------------------------------+
|restrictions.\        |String   |Specifies the name of this restriction.      |
|**name**              |         |                                             |
+----------------------+---------+---------------------------------------------+
|restrictions.\        |String   |Specifies a collection of rules that         |
|**rules**             |         |determine if this TTL should be applied to   |
|                      |         |an asset.                                    |
+----------------------+---------+---------------------------------------------+
|restrictions.rules.\  |String   |Specifies the name of this rule.             |
|**name**              |         |                                             |
+----------------------+---------+---------------------------------------------+
|restrictions.rules.\  |String   |Specifies the http host that requests must   |
|**referrer**          |         |come from.                                   |
+----------------------+---------+---------------------------------------------+
|\ **flavor_id**       |String   |Specifies the CDN provider flavor ID to use. |
|                      |         |For a list of flavors, see the operation to  |
|                      |         |list the available flavors.                  |
+----------------------+---------+---------------------------------------------+
|\ **status**          |String   |Specifies the current status of the service. |
+----------------------+---------+---------------------------------------------+
|status.\              |String   |Specifies that the service is currently      |
|**create_in_progress**|         |being created and deployed.                  |
+----------------------+---------+---------------------------------------------+
|status.\ **deployed** |String   |Specifies that the service has been deployed |
|                      |         |and is ready to use.                         |
+----------------------+---------+---------------------------------------------+
|status.\              |String   |Specifies that the service is currently      |
|**update_in_progress**|         |being updated.                               |
+----------------------+---------+---------------------------------------------+
|status.\              |String   |Specifies that the service is currently      |
|**delete_in_progress**|         |being deleted.                               |
+----------------------+---------+---------------------------------------------+
|status.\ **failed**   |String   |Specifies that the previous operation on the |
|                      |         |service failed to create, deploy, update, or |
|                      |         |delete. Looks for the errors[] for details.  |
+----------------------+---------+---------------------------------------------+
|\ **errors**          |String   |Specifies the list of errors that occurred   |
|                      |         |during the previous service action.          |
+----------------------+---------+---------------------------------------------+
|errors.\ **message**  |String   |Specifies an error message detailing why     |
|                      |         |there is an error.                           |
+----------------------+---------+---------------------------------------------+
|\ **links**           |String   |Specifies the self-navigating JSON document  |
|                      |         |paths.                                       |
+----------------------+---------+---------------------------------------------+
|links.\ **href**      |String   |Specifies the location to access this        |
|                      |         |resource.                                    |
+----------------------+---------+---------------------------------------------+
|links.\ **rel**       |String   |Specifies how the href link provided is      |
|                      |         |related to this resource_url.                |
+----------------------+---------+---------------------------------------------+

**Example: Retrieve all services HTTP and JSON response**

.. code::

   HTTP/1.1 200 OK
   Content-Type: application/json

.. code::

   {
       "links": [
           {
               "rel": "next",
               "href": "https://global.cdn.api.rackspacecloud.com/v1.0/110011/services?marker=96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0&limit=20"
           }
       ],
       "services": [
           {
               "id": "96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0",
               "project_id": "123456",
               "name": "mywebsite.com",
               "domains": [
                   {
                       "domain": "www.mywebsite.com"
                   }
               ],
               "origins": [
                   {
                       "origin": "mywebsite.com",
                       "port": 80,
                       "ssl": false
                   }
               ],
               "caching": [
                   {
                       "name": "default",
                       "ttl": 3600
                   },
                   {
                       "name": "home",
                       "ttl": 17200,
                       "rules": [
                           {
                               "name": "index",
                               "request_url": "/index.htm"
                           }
                       ]
                   },
                   {
                       "name": "images",
                       "ttl": 12800,
                       "rules": [
                           {
                               "name": "images",
                               "request_url": "*.png"
                           }
                       ]
                   }
               ],
               "restrictions": [
                   {
                       "name": "website only",
                       "rules": [
                           {
                               "name": "mywebsite.com",
                               "referrer": "www.mywebsite.com"
                           }
                       ]
                   }
               ],
               "flavor_id": "cdn",
               "status": "deployed",
               "errors" : [],
               "links": [
                   {
                       "href": "https://global.cdn.api.rackspacecloud.com/v1.0/110011/services/96737ae3-cfc1-4c72-be88-5d0e7cc9a3f0",
                       "rel": "self"
                   },
                   {
                       "href": "mywebsite.com.cdn1.raxcdn.com",
                       "rel": "access_url"
                   }
               ]
           },
           {
               "id": "96737ae3-cfc1-4c72-be88-5d0e7cc9a3f1",
               "project_id": "123456",
               "name": "myothersite.com",
               "domains": [
                   {
                       "domain": "www.myothersite.com"
                   }
               ],
               "origins": [
                   {
                       "origin": "44.33.22.11",
                       "port": 80,
                       "ssl": false
                   },
                   {
                       "origin": "77.66.55.44",
                       "port": 80,
                       "ssl": false,
                       "rules": [
                           {
                               "name": "videos",
                               "request_url": "^/videos/*.m3u"
                           }
                       ]
                   }
               ],
               "caching": [
                   {
                       "name": "default",
                       "ttl": 3600
                   }
               ],
               "restrictions": [
                   {}
               ],
               "flavor_id": "cdn",
               "status": "deployed",
               "links": [
                   {
                       "href": "https://global.cdn.api.rackspacecloud.com/v1.0/110011/services/96737ae3-cfc1-4c72-be88-5d0e7cc9a3f1",
                       "rel": "self"
                   },
                   {
                       "href": "myothersite.com.cdn1.raxcdn.com",
                       "rel": "access_url"
                   }
               ]
           }
       ]
   }
